from importlib import reload
from helper import run
from io import BytesIO
from tx import Tx

import ecc
import helper
import tx
import script


# fail to parse at first script

#raw_dat_tx = bytes.fromhex('02000000000101cfcf6b76c1cd12aee2dc236d76148933a022eaf656b036322ac4606e55eafdc70100000000feffffff020d0df53b000000001600146d91cc1ecf226da8e99454da512f46b6246cbe3c10270000000000001976a914a175b609a7c37011420585f1fcf392fdda9a025488ac0247304402201b9a0a86c3cf686674ce252eb111348a51dfd51569792ad4d0ec8de3be504cf0022068c639d220a0b548ac71712db4d9afbf6d7b3ce84216484fc01ea8393af066af012102539b61596c1f5fb63ba086d4fd31f1f2b4291eed9e83e8395caa9ad2e1bb8ed955121d00')

raw_dat_tx = bytes.fromhex('010000000199a24308080ab26e6fb65c4eccfadf76749bb5bfa8cb08f291320b3c21e56f0d0d0000006b4830450221008ed46aa2cf12d6d81065bfabe903670165b538f65ee9a3385e6327d80c66d3b502203124f804410527497329ec4715e18558082d489b218677bd029e7fa306a72236012103935581e52c354cd2f484fe8ed83af7a3097005b2f9c60bff71d35bd795f54b67ffffffff02408af701000000001976a914d52ad7ca9b3d096a38e752c2018e6fbc40cdf26f88ac80969800000000001976a914507b27411ccf7f16f10297de6cef3f291623eddf88ac00000000')

stream = BytesIO(raw_dat_tx)
dat_tx = Tx.parse(stream, testnet=True)
